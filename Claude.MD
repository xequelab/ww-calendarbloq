---
name: Calend√°rio de Agendamentos
description: Componente de calend√°rio mensal para agendamentos com indicadores visuais de disponibilidade, suporte para bloqueios semanais recorrentes e bloqueios de datas espec√≠ficas, e eventos de clique para integra√ß√£o de workflows.
keywords: calend√°rio, agendamento, disponibilidade, reservas, seletor de datas, visualiza√ß√£o mensal, datas bloqueadas, integra√ß√£o supabase, portugu√™s
---

#### Calend√°rio de Agendamentos

***Prop√≥sito:***
Componente especializado de calend√°rio desenvolvido para sistemas de agendamento e reservas. Exibe uma visualiza√ß√£o mensal com estados de disponibilidade codificados por cores, suporta bloqueios semanais recorrentes (ex: fins de semana) e bloqueios espec√≠ficos de datas do banco de dados, emitindo eventos detalhados de clique para integra√ß√£o de workflows no WeWeb. **Configurado para o mercado brasileiro com navega√ß√£o bloqueada para datas passadas.**

***Funcionalidades:***
- Visualiza√ß√£o de calend√°rio mensal limpa e com navega√ß√£o intuitiva
- Seletores dropdown modernos para m√™s e ano com navega√ß√£o r√°pida
- Bot√µes de seta para navega√ß√£o entre meses (anterior/pr√≥ximo)
- **Bloqueio autom√°tico de datas passadas** - Impede sele√ß√£o de meses/anos anteriores ao atual
- Sistema de bloqueio em quatro n√≠veis: dias dispon√≠veis, bloqueios semanais recorrentes, bloqueios parciais e bloqueios de dia completo
- **Convers√£o autom√°tica de timezone** - Hor√°rios UTC s√£o convertidos automaticamente para o fuso hor√°rio configurado e exibidos nos dias bloqueados parcialmente
- **Suporte para m√∫ltiplos bloqueios por dia** - Detecta e processa todos os bloqueios de uma mesma data
- Distin√ß√£o visual atrav√©s de codifica√ß√£o por cores (verde para dispon√≠vel, cinza para bloqueios semanais, vermelho claro para bloqueios parciais, vermelho escuro para bloqueios completos)
- Datas bloqueadas completamente exibem √≠cone de cadeado e fundo vermelho distinto
- Legenda interativa mostrando todos os estados de disponibilidade com indicadores de cores
- Destaque do dia atual com borda customiz√°vel
- Efeitos hover em datas clic√°veis
- Layout em grade responsivo que se adapta ao tamanho do container
- Desenvolvido com date-fns e date-fns-tz para manipula√ß√£o confi√°vel de datas e timezones
- Cores, √≠cones e labels totalmente customiz√°veis
- Interface 100% em portugu√™s do Brasil por padr√£o

***Propriedades:***
- blockedWeekdays: number[] - Array de n√∫meros de dias da semana (0-6, onde 0=Domingo) para bloquear em todas as semanas. Exemplo: [0, 6] bloqueia todos os domingos e s√°bados
- specificBlocks: object[] - Array de bloqueios espec√≠ficos do banco de dados com estrutura: { id: 'uuid', data_inicio: '2024-01-01', data_fim: '2024-01-05', dia_inteiro: true (ou dia_completo: true), motivo: 'texto', horario_inicio: 'HH:mm', horario_fim: 'HH:mm', profissional_id: 'uuid', created_at: 'timestamp' }
- timezone: string - Fuso hor√°rio IANA para convers√£o autom√°tica de hor√°rios UTC (padr√£o: 'America/Sao_Paulo'). Exemplos: 'America/New_York', 'Europe/London', 'Asia/Tokyo'
- weekdayLabels: string[] - Array de 7 r√≥tulos para dias da semana come√ßando com domingo. Padr√£o: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b']
- monthNames: string[] - Array de 12 nomes de meses para o seletor dropdown. Padr√£o: ['Janeiro', 'Fevereiro', 'Mar√ßo', ...] (nomes em portugu√™s)
- startYear: number|null - Primeiro ano dispon√≠vel no seletor de ano. Padr√£o: ano atual (n√£o permite anos passados)
- endYear: number|null - √öltimo ano dispon√≠vel no seletor de ano. Padr√£o: ano atual + 10
- availableColor: string - Cor de fundo para dias dispon√≠veis/reserv√°veis (padr√£o: '#d4edda' - verde claro)
- weekdayBlockColor: string - Cor de fundo para bloqueios semanais recorrentes (padr√£o: '#e9ecef' - cinza claro)
- specificBlockColor: string - Cor de fundo para bloqueios parciais de datas (padr√£o: '#f8d7da' - vermelho claro)
- fullDayBlockColor: string - Cor de fundo para dias completamente bloqueados com √≠cone de cadeado (padr√£o: '#dc3545' - vermelho)
- blockIcon: string - Nome do √≠cone do sistema para datas totalmente bloqueadas (padr√£o: 'lock')
- showLegend: boolean - Exibir legenda explicando c√≥digos de cores e tipos de bloqueio (padr√£o: true)
- legendLabels: object - R√≥tulos de texto customiz√°veis da legenda: { available: 'Dispon√≠vel', weekdayBlock: 'Bloqueio semanal', partialBlock: 'Bloqueio parcial', fullBlock: 'Bloqueado' }
- currentDayBorderColor: string - Cor da borda para a data de hoje (padr√£o: '#007bff' - azul)
- backgroundColor: string - Cor de fundo do container do calend√°rio
- headerTextColor: string - Cor do texto do cabe√ßalho m√™s/ano e seletores
- weekdayTextColor: string - Cor da linha de r√≥tulos dos dias da semana
- dayTextColor: string - Cor dos n√∫meros dos dias na grade do calend√°rio
- buttonColor: string - Cor dos bot√µes de seta de navega√ß√£o
- buttonBackgroundColor: string|null - Cor de fundo dos bot√µes de navega√ß√£o (padr√£o: transparent)
- padding: string - Padding interno ao redor do conte√∫do do calend√°rio (padr√£o: '20px')
- borderRadius: string - Raio da borda para cantos arredondados (padr√£o: '8px')
- boxShadow: string - Efeito de sombra ao redor do calend√°rio (padr√£o: '0 2px 8px rgba(0, 0, 0, 0.1)')
- prevIcon: string - Nome do √≠cone do sistema para bot√£o de m√™s anterior (padr√£o: 'chevron-left')
- nextIcon: string - Nome do √≠cone do sistema para bot√£o de pr√≥ximo m√™s (padr√£o: 'chevron-right')

***Eventos:***
- dateClick: Disparado quando o usu√°rio clica em qualquer data. Payload: { date: '2024-01-15' (string ISO), timestamp: 1705276800000, isBlocked: false, blockType: 'available'|'weekday'|'specific', blockInfo: [{ id, data_inicio, data_fim, dia_inteiro, created_at, motivo, horario_inicio, horario_fim }, ...] (array de bloqueios) ou null, blockIds: ['uuid1', 'uuid2', ...] (array com IDs de todos os bloqueios da data) }
- monthChange: Disparado quando o usu√°rio navega para um m√™s diferente. Payload: { month: 'Janeiro 2024', direction: 'previous'|'next'|'today'|'selector' }

***A√ß√µes Expostas:***
- `goToToday`: Navegar calend√°rio para o m√™s atual. Sem argumentos
- `goToDate`: Navegar calend√°rio para uma data espec√≠fica. Args: date (string) - String de data em formato ISO como '2024-06-15'

***Vari√°veis Expostas:***
- selectedDate: √öltima data clicada em formato ISO (caminho: variables['uid-selectedDate'])
- currentMonth: M√™s e ano atualmente exibidos (caminho: variables['uid-currentMonth'])
- isBlocked: Boolean indicando se a data clicada est√° bloqueada (caminho: variables['uid-isBlocked'])
- blockType: Tipo de bloqueio: 'available', 'weekday' ou 'specific' (caminho: variables['uid-blockType'])
- blockIds: Array com IDs de todos os bloqueios da data clicada (caminho: variables['uid-blockIds'])
- blockId: ID do primeiro bloqueio no banco de dados (caminho: variables['uid-blockId']) - retrocompatibilidade
- blockDataInicio: Data de in√≠cio do primeiro bloqueio (caminho: variables['uid-blockDataInicio']) - retrocompatibilidade
- blockDataFim: Data de fim do primeiro bloqueio (caminho: variables['uid-blockDataFim']) - retrocompatibilidade
- blockDiaInteiro: Boolean indicando se o primeiro bloqueio √© de dia inteiro (caminho: variables['uid-blockDiaInteiro']) - retrocompatibilidade
- blockMotivo: Motivo do primeiro bloqueio (caminho: variables['uid-blockMotivo']) - retrocompatibilidade
- blockCreatedAt: Timestamp de cria√ß√£o do primeiro bloqueio (caminho: variables['uid-blockCreatedAt']) - retrocompatibilidade
- blockHorarioInicioUtc: Array com hor√°rios de in√≠cio UTC de todos os bloqueios da data (caminho: variables['uid-blockHorarioInicioUtc'])
- blockHorarioFimUtc: Array com hor√°rios de fim UTC de todos os bloqueios da data (caminho: variables['uid-blockHorarioFimUtc'])

***Notas Importantes:***
- O componente utiliza a biblioteca date-fns para c√°lculos e formata√ß√£o confi√°vel de datas
- **üö´ Navega√ß√£o de datas passadas bloqueada**: Usu√°rios N√ÉO podem navegar para meses/anos anteriores ao atual usando setas ou seletores
- O bot√£o de "m√™s anterior" √© automaticamente desabilitado quando o calend√°rio est√° no m√™s atual
- Usu√°rios podem navegar por meses e anos usando bot√µes de seta ou seletores dropdown
- Seletores de m√™s e ano s√£o sincronizados com a navega√ß√£o por setas
- O intervalo de anos padr√£o √© do ano atual at√© ano atual + 10 (customiz√°vel com startYear e endYear)
- Datas fora do m√™s atual s√£o exibidas com opacidade reduzida e n√£o s√£o clic√°veis
- **Hierarquia de bloqueios**: Bloqueios de dia completo (dia_inteiro = true ou dia_completo = true) s√£o visualmente distintos com √≠cone de cadeado e fundo vermelho; bloqueios parciais aparecem em vermelho claro; bloqueios semanais em cinza
- A propriedade specificBlocks foi projetada para trabalhar diretamente com resultados de consultas Supabase da tabela "bloqueios_profissional"
- O campo `dia_inteiro` (ou `dia_completo` para retrocompatibilidade) determina se um bloqueio espec√≠fico aparece como bloqueado completamente (com √≠cone) ou bloqueio parcial
- **Suporte para m√∫ltiplos bloqueios por dia**: O componente detecta e retorna TODOS os bloqueios de uma data espec√≠fica atrav√©s do evento dateClick (blockInfo √© um array)
- **Todos os dados do bloqueio** (id, data_inicio, data_fim, dia_inteiro, created_at, motivo, horario_inicio, horario_fim) s√£o passados no evento dateClick atrav√©s de blockInfo como array, permitindo workflows complexos no WeWeb
- **IDs de bloqueios expostos**: A vari√°vel blockIds e o campo blockIds no evento dateClick cont√™m arrays com todos os IDs dos bloqueios da data clicada, facilitando opera√ß√µes de atualiza√ß√£o/exclus√£o em massa no banco de dados
- **Hor√°rios UTC expostos**: As vari√°veis blockHorarioInicioUtc e blockHorarioFimUtc cont√™m arrays com os hor√°rios UTC de todos os bloqueios, prontos para convers√£o de timezone via JavaScript
- Todas as entradas de data devem estar em formato ISO (YYYY-MM-DD) para consist√™ncia
- Campos de hor√°rio (horario_inicio, horario_fim) em bloqueios espec√≠ficos s√£o inclu√≠dos no payload do evento de clique e nas vari√°veis expostas para convers√£o de timezone
- O calend√°rio destaca automaticamente a data de hoje com uma borda distintiva
- Bot√µes de navega√ß√£o e seletores s√£o desabilitados no modo de edi√ß√£o para prevenir interfer√™ncia
- Todas as intera√ß√µes s√£o desabilitadas quando isEditing √© true para garantir comportamento adequado do editor
- O componente √© totalmente responsivo e se adapta √† largura do container
- A legenda pode ser ocultada definindo showLegend como false
- Todos os r√≥tulos da legenda s√£o customiz√°veis para suporte multi-idioma
- Customiza√ß√£o de cores permite combinar com qualquer sistema de design ou diretrizes de marca
- O √≠cone de bloqueio pode ser alterado para qualquer √≠cone do sistema (lock, ban, x-circle, etc.)
- **Interface 100% em portugu√™s brasileiro** com labels, meses e dias da semana traduzidos por padr√£o